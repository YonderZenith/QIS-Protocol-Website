<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WMPC09C3R0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WMPC09C3R0');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO -->
  <meta name="description" content="A step-by-step technical guide to building real-time drug safety monitoring using QIS. Every patient becomes a silent sensor. Bad batches surface in days, not years. No new technology required.">
  <meta name="keywords" content="QIS Protocol, drug safety monitoring, pharmacovigilance, adverse events, real-time detection, FAERS, FDA, Vioxx, distributed systems">
  <meta name="author" content="Christopher Thomas Trevethan">

  <!-- Open Graph -->
  <meta property="og:title" content="Real-Time Drug Safety Monitoring: A Technical Blueprint">
  <meta property="og:description" content="Every patient on a drug becomes a silent sensor. Bad batches surface in days. This isn't future tech—it's a configuration change.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://qisprotocol.com/article-drug-safety-monitoring.html">

  <title>Real-Time Drug Safety Monitoring • QIS Protocol</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-primary:#000;
      --bg-soft: rgba(255,255,255,0.03);
      --text-primary:#fff;
      --text-secondary: rgba(255,255,255,0.78);
      --text-muted: rgba(255,255,255,0.58);
      --cyan-primary:#00beeA;
      --cyan-bright:#00d9ff;
      --purple-quantum:#8b5cf6;
      --gold-accent:#f59e0b;
      --green-accent:#10b981;
      --red-accent:#ef4444;
      --border: rgba(0, 190, 234, 0.22);
      --shadow: 0 0 30px rgba(0, 217, 255, 0.12);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Rajdhani', sans-serif;
      line-height: 1.8;
      overflow-x: hidden;
    }

    body::before{
      content:"";
      position:fixed; inset:0;
      background:
        radial-gradient(800px 400px at 20% 10%, rgba(0, 217, 255, 0.10), transparent 60%),
        radial-gradient(900px 500px at 80% 30%, rgba(139, 92, 246, 0.10), transparent 60%),
        radial-gradient(800px 500px at 40% 90%, rgba(0, 190, 234, 0.08), transparent 60%);
      pointer-events:none;
      z-index:0;
    }

    /* Navigation */
    .nav{
      position:fixed; top:0; left:0; right:0;
      display:flex; align-items:center; justify-content:space-between;
      padding: 20px 40px;
      background: rgba(10, 10, 10, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0, 190, 234, 0.2);
      z-index:1000;
    }
    .nav-logo{
      display:flex; align-items:center; gap:15px;
      color:var(--text-primary);
      text-decoration:none;
    }
    .nav-logo span{
      font-family: 'Orbitron', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--cyan-bright);
    }
    .nav-logo img{ width:40px; height:40px; filter: drop-shadow(0 0 10px rgba(0, 190, 234, 0.5)); }

    .nav-links{ display:flex; gap:30px; align-items:center; }
    .nav-links a{
      color: var(--text-secondary);
      text-decoration:none;
      font-size: 1rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
    }
    .nav-links a:hover{ color: var(--cyan-bright); }

    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
      z-index: 1001;
    }
    .hamburger span {
      width: 25px;
      height: 3px;
      background: var(--cyan-bright);
      transition: all 0.3s ease;
    }
    .nav-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    .nav-overlay.active { display: block; }

    /* Hero */
    .hero{
      padding:160px 40px 40px;
      text-align:center;
      position:relative;
      z-index:1;
    }
    .hero-badge{
      display:inline-block;
      padding:8px 20px;
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.20), rgba(245, 158, 11, 0.20));
      border: 1px solid var(--red-accent);
      border-radius: 30px;
      font-family: Orbitron, sans-serif;
      font-size:0.85rem;
      color: var(--red-accent);
      text-transform:uppercase;
      letter-spacing:2px;
      margin-bottom:25px;
    }
    .hero h1{
      font-family: 'Orbitron', sans-serif;
      font-size:clamp(2rem, 5vw, 3.2rem);
      font-weight:900;
      line-height:1.1;
      background: linear-gradient(135deg, var(--red-accent) 0%, var(--gold-accent) 50%, var(--cyan-bright) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom:20px;
    }
    .hero-subtitle{
      font-size:clamp(1.1rem, 2vw, 1.4rem);
      color: var(--text-secondary);
      max-width:850px;
      margin:0 auto 30px;
    }
    .hero-meta{
      display:flex;
      justify-content:center;
      gap:30px;
      flex-wrap:wrap;
      font-size:0.95rem;
      color: var(--text-muted);
    }
    .hero-meta span{ display:flex; align-items:center; gap:8px; }

    /* Article Container */
    .article-container{
      max-width:900px;
      margin:0 auto;
      padding:60px 40px 100px;
      position:relative;
      z-index:1;
    }

    .article-container h2{
      font-family: 'Orbitron', sans-serif;
      font-size:1.8rem;
      color: var(--cyan-bright);
      margin:50px 0 20px;
      padding-bottom:10px;
      border-bottom: 1px solid var(--border);
    }
    .article-container h3{
      font-family: 'Orbitron', sans-serif;
      font-size:1.3rem;
      color: var(--purple-quantum);
      margin:35px 0 15px;
    }
    .article-container p{
      font-size:1.15rem;
      color: var(--text-secondary);
      margin-bottom:20px;
    }
    .article-container strong{
      color: var(--cyan-bright);
    }

    /* Problem Box */
    .problem-box{
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.12), rgba(245, 158, 11, 0.08));
      border: 2px solid var(--red-accent);
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
    }
    .problem-box h3{
      color: var(--red-accent);
      margin-top: 0;
    }
    .problem-box .stat{
      font-size: 2rem;
      font-family: 'Orbitron', sans-serif;
      color: var(--red-accent);
      margin: 15px 0;
    }

    /* Step Cards */
    .step-card{
      background: linear-gradient(135deg, rgba(0, 190, 234, 0.06), rgba(139, 92, 246, 0.06));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
      position: relative;
    }
    .step-card::before{
      content: attr(data-step);
      position: absolute;
      top: -15px;
      left: 25px;
      background: linear-gradient(135deg, var(--cyan-primary), var(--purple-quantum));
      color: white;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.85rem;
      font-weight: 700;
      padding: 6px 18px;
      border-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .step-card h3{
      margin-top: 10px;
      color: var(--cyan-bright);
    }

    /* Code Blocks */
    .code-block{
      background: rgba(0, 0, 0, 0.6);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      color: var(--cyan-bright);
      line-height: 1.6;
    }
    .code-block .comment{
      color: var(--text-muted);
    }
    .code-block .key{
      color: var(--purple-quantum);
    }
    .code-block .value{
      color: var(--gold-accent);
    }
    .code-block .string{
      color: var(--green-accent);
    }

    /* Key Examples */
    .key-examples{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .key-example{
      background: rgba(139, 92, 246, 0.1);
      border: 1px solid var(--purple-quantum);
      border-radius: 8px;
      padding: 15px;
    }
    .key-example code{
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--cyan-bright);
      display: block;
      margin-bottom: 8px;
    }
    .key-example span{
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    /* Routing Options */
    .routing-options{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .routing-option{
      background: rgba(0, 190, 234, 0.08);
      border: 1px solid var(--cyan-primary);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }
    .routing-option strong{
      display: block;
      margin-bottom: 5px;
      color: var(--cyan-bright);
    }
    .routing-option span{
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    /* Scalability Table */
    .scale-table{
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    .scale-table th,
    .scale-table td{
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    .scale-table th{
      background: rgba(0, 190, 234, 0.1);
      color: var(--cyan-bright);
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
    }
    .scale-table td{
      color: var(--text-secondary);
    }
    .scale-table tr:hover td{
      background: rgba(0, 190, 234, 0.05);
    }

    /* Use Cases Grid */
    .use-cases{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    .use-case{
      background: rgba(245, 158, 11, 0.08);
      border: 1px solid var(--gold-accent);
      border-radius: 12px;
      padding: 20px;
    }
    .use-case h4{
      color: var(--gold-accent);
      font-family: 'Orbitron', sans-serif;
      font-size: 1rem;
      margin-bottom: 10px;
    }
    .use-case p{
      font-size: 1rem;
      margin: 0;
      color: var(--text-secondary);
    }

    /* Comparison Table */
    .comparison-table{
      width: 100%;
      border-collapse: collapse;
      margin: 25px 0;
    }
    .comparison-table th,
    .comparison-table td{
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    .comparison-table th{
      background: rgba(239, 68, 68, 0.1);
      color: var(--text-primary);
      font-family: 'Orbitron', sans-serif;
      font-size: 0.85rem;
    }
    .comparison-table th:first-child{
      width: 25%;
    }
    .comparison-table .old{
      color: var(--red-accent);
    }
    .comparison-table .new{
      color: var(--green-accent);
    }

    /* Highlight Box */
    .highlight-box{
      background: linear-gradient(135deg, rgba(0, 190, 234, 0.08), rgba(139, 92, 246, 0.08));
      border: 1px solid var(--cyan-primary);
      border-radius: 12px;
      padding: 25px 30px;
      margin: 30px 0;
    }
    .highlight-box p:last-child{ margin-bottom:0; }

    /* Architecture Note */
    .architecture-note{
      background: rgba(139, 92, 246, 0.1);
      border-left: 4px solid var(--purple-quantum);
      padding: 20px 25px;
      margin: 25px 0;
      border-radius: 0 8px 8px 0;
    }
    .architecture-note p:last-child{ margin-bottom: 0; }

    /* Final Challenge */
    .final-challenge{
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(0, 190, 234, 0.12));
      border: 2px solid var(--green-accent);
      border-radius: 16px;
      padding: 40px;
      margin: 50px 0;
      text-align: center;
    }
    .final-challenge h3{
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: var(--green-accent);
      margin: 0 0 20px 0;
    }
    .final-challenge p{
      font-size: 1.15rem;
      margin-bottom: 15px;
    }
    .final-challenge .conclusion{
      font-size: 1.4rem;
      color: var(--text-primary);
      font-weight: 700;
      margin-top: 25px;
    }

    /* CTA Section */
    .cta-section{
      text-align:center;
      padding:60px 40px;
      margin-top:40px;
      border-top: 1px solid var(--border);
    }
    .cta-section h2{
      font-family:'Orbitron', sans-serif;
      font-size:1.6rem;
      margin-bottom:20px;
      border:none;
      padding:0;
    }
    .cta-buttons{
      display:flex;
      gap:20px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:25px;
    }
    .cta-buttons a{
      padding:14px 32px;
      border-radius:8px;
      text-decoration:none;
      font-weight:700;
      font-size:1rem;
      transition: all 0.3s ease;
    }
    .cta-primary{
      background: linear-gradient(135deg, var(--cyan-primary), var(--purple-quantum));
      color:white;
    }
    .cta-primary:hover{
      transform:translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 190, 234, 0.3);
    }
    .cta-secondary{
      border:2px solid var(--cyan-primary);
      color:var(--cyan-bright);
      background:transparent;
    }
    .cta-secondary:hover{
      background: rgba(0, 190, 234, 0.1);
    }

    /* Footer */
    footer{
      text-align:center;
      padding:40px;
      border-top:1px solid var(--border);
      color: var(--text-muted);
      font-size:0.95rem;
    }
    footer a{
      color: var(--cyan-bright);
      text-decoration:none;
    }

    /* Mobile */
    @media(max-width:768px){
      .nav{ padding:15px 20px; }
      .nav-links{
        position:fixed;
        top:0; right:-100%;
        width:70%; max-width:300px;
        height:100vh;
        background: rgba(10,10,10,0.98);
        flex-direction:column;
        justify-content:center;
        gap:30px;
        transition: right 0.3s ease;
        border-left:1px solid var(--border);
      }
      .nav-links.active{ right:0; }
      .hamburger{ display:flex; }

      .hero{ padding:120px 20px 30px; }
      .hero h1{ font-size:1.8rem; }
      .article-container{ padding:40px 20px 60px; }
      .article-container h2{ font-size:1.4rem; }
      .step-card{ padding: 25px 20px; }
      .code-block{ font-size: 0.8rem; padding: 15px; }
      .comparison-table{ font-size: 0.9rem; }
      .comparison-table th, .comparison-table td{ padding: 10px 8px; }
    }
  </style>
</head>
<body>

  <!-- Navigation -->
  <nav class="nav">
    <a href="index.html?skip=true" class="nav-logo">
      <img src="images/favicon.png" alt="QIS Protocol">
      <span>QIS PROTOCOL</span>
    </a>
    <div class="hamburger" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </div>
    <div class="nav-overlay" onclick="toggleMenu()"></div>
    <div class="nav-links">
      <a href="index.html?skip=true">Home</a>
      <a href="how-it-works.html">How It Works</a>
      <a href="comparison.html">Compare</a>
      <a href="watch-demo.html">Demo</a>
      <a href="index.html?skip=true#documents">Docs</a>
      <a href="healthcare.html">Healthcare</a>
      <a href="techrace.html">Tech Race</a>
      <a href="faq.html">FAQ</a>
      <a href="about.html">About</a>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero">
    <div class="hero-badge">Technical Blueprint</div>
    <h1>Real-Time Drug Safety Monitoring</h1>
    <p class="hero-subtitle">Every patient on a drug becomes a silent sensor. Bad batches surface in days, not years. No raw data leaves devices. No new technology required. This is a configuration change.</p>
    <div class="hero-meta">
      <span>By <a href="https://linkedin.com/in/christrevethan" target="_blank" style="color: var(--cyan-bright);">Christopher Thomas Trevethan</a></span>
      <span>January 15, 2026</span>
    </div>
  </header>

  <!-- Article Content -->
  <article class="article-container">

    <div class="problem-box">
      <h3>The Problem We're Solving</h3>
      <p>Vioxx was approved in May 1999. Withdrawn September 2004. <strong>Five years on the market.</strong></p>
      <div class="stat">88,000–140,000 heart attacks. 38,000+ deaths.</div>
      <p>The FDA's FAERS system captures only 1–10% of adverse events through voluntary reporting. Quarterly batch updates. Significant lag time from collection to analysis. Signals that should take weeks to surface take years.</p>
      <p>A Lancet meta-analysis concluded Vioxx "should have been withdrawn several years earlier." The data existed. The system couldn't see it fast enough.</p>
    </div>

    <p>This article is a technical blueprint. Not speculation. Not future tech. A deployable system using existing, proven components—DHTs, vector databases, registries, pub/sub systems, or even centralized databases. Pick your routing mechanism. The math stays the same.</p>

    <p>The goal: turn every patient on a drug, device, or trial into a silent sensor that signals harm in real time. No raw data leaves devices. No names. No charts. Just tiny, signed outcome packets routed to a shared, deterministic space.</p>

    <p>Pharma, regulators, CROs, or hospitals listen. A spike in side effects? Alert fires before the bad lot reaches more patients.</p>

    <div class="highlight-box">
      <p><strong>Quadratic insight means the signal grows faster than the noise:</strong> n patients yield up to n(n-1)/2 pairwise comparisons. 1,000 patients = ~500,000 signals. 10,000 = ~50 million. Early warning scales with participation.</p>
    </div>

    <h2>Core Requirements</h2>

    <p>Any system capable of the following can run this protocol:</p>

    <p>1. <strong>Defining a deterministic similarity space</strong> (the "bucket")<br>
    2. <strong>Aggregating local outcomes</strong> into tiny packets<br>
    3. <strong>Routing/pushing packets</strong> to that space<br>
    4. <strong>Allowing listeners to receive packets</strong> in real time (push preferred) or on demand (pull fallback)<br>
    5. <strong>Synthesizing rolling statistics</strong> locally</p>

    <p>No new inventions required. <a href="article-every-component-exists.html">Every component exists today.</a></p>

    <div class="architecture-note">
      <p><strong>Architecture-agnostic:</strong> The methods below are interchangeable. DHT gossip, vector database upsert, MQTT publish, registry write, WebSocket stream, central API—pick one, hybridize, or swap later. The protocol doesn't care. The scaling law holds regardless.</p>
    </div>

    <h2>Step-by-Step Implementation</h2>

    <!-- STEP 1 -->
    <div class="step-card" data-step="Step 1">
      <h3>Define the Monitoring Bucket</h3>
      
      <p>The system admin (pharma company, CRO, regulator, or open network) chooses a monitoring key and publishes it once to the network. This key defines what "similar" means for this monitoring use case.</p>

      <div class="key-examples">
        <div class="key-example">
          <code>osimertinib-lot-7B9K2</code>
          <span>Track a specific batch for bad lots</span>
        </div>
        <div class="key-example">
          <code>NCT-04321-phase3</code>
          <span>Live clinical trial safety monitoring</span>
        </div>
        <div class="key-example">
          <code>osi+ramucirumab</code>
          <span>Drug combination interaction flags</span>
        </div>
        <div class="key-example">
          <code>drugX-age65-EGFR+</code>
          <span>Subgroup-specific risk monitoring</span>
        </div>
        <div class="key-example">
          <code>drugA-geo:US-MI</code>
          <span>Regional cluster detection</span>
        </div>
        <div class="key-example">
          <code>stent-lot-Z9Q-diabetic</code>
          <span>Medical device + comorbidity watch</span>
        </div>
      </div>

      <p>Convert via any deterministic method: SHA-256 hash, MedCPT/BERT embedding, registry lookup—doesn't matter. Output: one fixed key that maps to a location in your routing space.</p>

      <p>Patient devices receive this key via app install, QR scan, login, or manual entry. No patient-side computation needed—they just join the bucket.</p>
    </div>

    <!-- STEP 2 -->
    <div class="step-card" data-step="Step 2">
      <h3>Define the Packet Schema</h3>
      
      <p>64–512 bytes max. Signed with Ed25519 (64-byte signatures, 32-byte keys). Smaller than a tweet.</p>

      <div class="code-block">
{
  <span class="key">"drug"</span>: <span class="string">"osimertinib"</span>,
  <span class="key">"lot"</span>: <span class="string">"7B9K2"</span>,
  <span class="key">"months_on"</span>: <span class="value">38</span>,
  <span class="key">"side_effects"</span>: {
    <span class="string">"nausea"</span>: <span class="value">4</span>,
    <span class="string">"rash"</span>: <span class="value">3</span>,
    <span class="string">"fatigue"</span>: <span class="value">2</span>
  },
  <span class="key">"serious_ae"</span>: <span class="value">false</span>,
  <span class="key">"alive"</span>: <span class="value">1</span>,
  <span class="key">"ts"</span>: <span class="string">"2026-01-09"</span>,
  <span class="key">"sig"</span>: <span class="string">"ed25519_hex..."</span>
}
      </div>

      <p>Device auto-fills from wearables, EHR API (FHIR), patient portals, health records, any database or connected device, voice input, or manual entry—all processed locally. Raw health records never leave the device. Only this outcome packet transmits.</p>

      <p>The signature proves authenticity without revealing identity. The timestamp enables recency weighting. The severity scores enable threshold alerts.</p>
    </div>

    <!-- STEP 3 -->
    <div class="step-card" data-step="Step 3">
      <h3>Route Packets to the Bucket</h3>
      
      <p><strong>Preferred:</strong> Auto-push on event (new symptom logged) or on schedule (daily/weekly heartbeat).</p>
      <p><strong>Alternative:</strong> Scheduled pull or active trigger from listener.</p>

      <p>Routes via your chosen mechanism:</p>

      <div class="routing-options">
        <div class="routing-option">
          <strong>DHT Gossip</strong>
          <span>libp2p, Kademlia</span>
        </div>
        <div class="routing-option">
          <strong>Vector Upsert</strong>
          <span>Pinecone, FAISS, Weaviate</span>
        </div>
        <div class="routing-option">
          <strong>Pub/Sub</strong>
          <span>MQTT, Redis, Kafka</span>
        </div>
        <div class="routing-option">
          <strong>Registry Write</strong>
          <span>DNS-SD, mDNS, custom</span>
        </div>
        <div class="routing-option">
          <strong>Central API</strong>
          <span>REST, GraphQL, WebSocket</span>
        </div>
      </div>

      <p>All methods work. Pick based on your deployment constraints. Decentralized networks use DHT/gossip. Enterprise deployments might use central APIs with regional caches. Hybrid approaches combine both.</p>
    </div>

    <!-- STEP 4 -->
    <div class="step-card" data-step="Step 4">
      <h3>Listener Setup</h3>
      
      <p>Listeners (pharma safety teams, regulators, CROs, hospitals) subscribe to the bucket key:</p>

      <p><strong>Push (preferred):</strong> WebSocket, MQTT, or UDP stream. Packets arrive in &lt;100ms. No polling loop needed.</p>

      <p><strong>Pull (fallback):</strong> Query delta on interval. Less real-time but works behind restrictive firewalls.</p>

      <div class="code-block">
<span class="comment">// Subscribe to monitoring bucket</span>
<span class="key">const</span> bucketKey = <span class="string">"osimertinib-lot-7B9K2"</span>;
<span class="key">const</span> stream = network.subscribe(bucketKey);

stream.on(<span class="string">'packet'</span>, (packet) => {
  <span class="comment">// Verify signature</span>
  <span class="key">if</span> (!verify(packet.sig, packet)) <span class="key">return</span>;
  
  <span class="comment">// Add to local synthesis buffer</span>
  synthesisBuffer.push(packet);
  
  <span class="comment">// Check alert thresholds</span>
  checkAlerts(synthesisBuffer);
});
      </div>

      <p>Multiple listeners can subscribe to the same bucket. Each maintains their own local synthesis. No central aggregation required.</p>
    </div>

    <!-- STEP 5 -->
    <div class="step-card" data-step="Step 5">
      <h3>Local Synthesis & Alerts</h3>
      
      <p>Listener (laptop, server, or even phone) runs rolling statistics locally:</p>

      <p>• Median duration/survival<br>
      • % side_effects ≥ severity 3<br>
      • Serious adverse event rate<br>
      • 2σ spike detection vs. baseline<br>
      • 95% confidence intervals</p>

      <p>Any synthesis method works—simple majority vote, weighted averaging by recency, rule-based flags, Bayesian updating, ensemble combinations. Networks compete on best synthesis algorithms.</p>

      <div class="code-block">
<span class="comment">// Example: Rolling serious AE rate with 2σ alert</span>
<span class="key">function</span> checkAlerts(buffer) {
  <span class="key">const</span> recentPackets = buffer.filter(p => 
    daysSince(p.ts) < <span class="value">30</span>
  );
  
  <span class="key">const</span> seriousRate = recentPackets
    .filter(p => p.serious_ae).length / recentPackets.length;
  
  <span class="key">const</span> baseline = <span class="value">0.02</span>; <span class="comment">// 2% historical baseline</span>
  <span class="key">const</span> stdDev = <span class="value">0.005</span>;
  
  <span class="key">if</span> (seriousRate > baseline + (<span class="value">2</span> * stdDev)) {
    triggerAlert({
      bucket: bucketKey,
      rate: seriousRate,
      baseline: baseline,
      n: recentPackets.length,
      confidence: calculateCI(seriousRate, recentPackets.length)
    });
  }
}
      </div>

      <p><strong>Quadratic power:</strong> n(n-1)/2 pairwise comparisons means rare events surface fast. At 10,000 patients, you have ~50 million signal opportunities. Statistical power that traditional reporting can't match.</p>
    </div>

    <!-- STEP 6 -->
    <div class="step-card" data-step="Step 6">
      <h3>Resilience & Audit</h3>
      
      <p>• <strong>Multi-leader sync:</strong> 2–5 regional caches gossip sync. No single point of failure.</p>
      <p>• <strong>Partial results:</strong> System degrades gracefully if nodes go offline. Synthesis continues with available data. Optional: assign bucket leaders (1 or more per bucket) that retain all outcome packets for that bucket—eliminates node churn as a concern entirely.</p>
      <p>• <strong>Merkle root audit:</strong> Optional hourly Merkle root for verifiable audit trail. Proves dataset integrity without revealing individual packets.</p>
      <p>• <strong>Kill switch:</strong> Unsubscribe key → stream dies, devices stop pushing. Clean shutdown when monitoring period ends.</p>
    </div>

    <h2>Scalability Numbers</h2>

    <p>Conservative 2026 estimates (5G ~250 Mbps average, 512-byte packets):</p>

    <table class="scale-table">
      <tr>
        <th>Patients</th>
        <th>Pairwise Signals</th>
        <th>Full Update Time</th>
      </tr>
      <tr>
        <td>1,000</td>
        <td>~500,000</td>
        <td>3–5 seconds</td>
      </tr>
      <tr>
        <td>10,000</td>
        <td>~50 million</td>
        <td>15–25 seconds</td>
      </tr>
      <tr>
        <td>100,000</td>
        <td>~5 billion</td>
        <td>8–12 seconds (incremental)</td>
      </tr>
      <tr>
        <td>1,000,000</td>
        <td>~500 billion</td>
        <td>90s–2 min phone / 20–40s laptop</td>
      </tr>
    </table>

    <p>More monitoring networks → tighter, more specific buckets → smaller individual pulls. Phone memory limit (~500MB sustained)? Swap to tablet/laptop for heavy synthesis—same code, same protocol.</p>

    <h2>Use Cases (Same System, Different Bucket Key)</h2>

    <div class="use-cases">
      <div class="use-case">
        <h4>Bad Lot Detection</h4>
        <p>Rash rate spikes 4x in lot 7B9K2. Alert fires in 72 hours. Recall issued same week—not same year.</p>
      </div>
      <div class="use-case">
        <h4>Live Trial Safety</h4>
        <p>Mid-trial liver enzyme flags surface at 200 patients. Recruitment pauses for safety review before reaching 2,000.</p>
      </div>
      <div class="use-case">
        <h4>Combo Interaction</h4>
        <p>Drug A + Drug B + age 60+ = unexpected fatigue cluster. Dose adjustment guidance issued in weeks.</p>
      </div>
      <div class="use-case">
        <h4>Subgroup Risk</h4>
        <p>Smokers on Drug X show 3x nausea rate. Smoker-specific warning label added proactively.</p>
      </div>
      <div class="use-case">
        <h4>Regional Cluster</h4>
        <p>Midwest nerve pain reports cluster in specific geographic area. Targeted investigation reveals storage issue.</p>
      </div>
      <div class="use-case">
        <h4>Device Watch</h4>
        <p>Stent infection rate rises in diabetic patients with specific lot. Redesign begins before widespread harm.</p>
      </div>
    </div>

    <h2>Traditional vs. QIS Monitoring</h2>

    <table class="comparison-table">
      <tr>
        <th>Metric</th>
        <th class="old">FDA FAERS (Current)</th>
        <th class="new">QIS Real-Time</th>
      </tr>
      <tr>
        <td>Detection time</td>
        <td class="old">12–18 months typical</td>
        <td class="new">Days to weeks</td>
      </tr>
      <tr>
        <td>Capture rate</td>
        <td class="old">1–10% (voluntary)</td>
        <td class="new">100% of participants</td>
      </tr>
      <tr>
        <td>Rare event detection</td>
        <td class="old">Often missed (&lt;1-in-3,000)</td>
        <td class="new">Detects 1-in-100,000 at scale</td>
      </tr>
      <tr>
        <td>Update frequency</td>
        <td class="old">Quarterly batch</td>
        <td class="new">Real-time stream</td>
      </tr>
      <tr>
        <td>Data shared</td>
        <td class="old">Full adverse event reports</td>
        <td class="new">64–512 byte outcome packets</td>
      </tr>
      <tr>
        <td>Vioxx scenario</td>
        <td class="old">5+ years to withdrawal</td>
        <td class="new">8–12 weeks detection</td>
      </tr>
    </table>

    <h2>What This Doesn't Require</h2>

    <p>• <strong>No new laws.</strong> Voluntary participation. Patients opt in by installing the app.<br>
    • <strong>No mandatory servers.</strong> Decentralized or centralized—your choice.<br>
    • <strong>No blockchain consensus.</strong> No proof-of-work or Byzantine fault tolerance needed—just aggregating outcome observations.<br>
    • <strong>No raw data sharing.</strong> Only outcome packets. PII stays on device.<br>
    • <strong>No new technology.</strong> DHTs, vector DBs, pub/sub, Ed25519—all battle-tested at scale.</p>

    <div class="final-challenge">
      <h3>The Challenge</h3>
      
      <p>Show me the step that needs invention.</p>
      <p>Show me the packet too heavy.</p>
      <p>Show me the alert too slow.</p>
      
      <p class="conclusion">Can't?<br>Then real-time drug safety isn't future tech.<br><strong>It's a configuration change.</strong></p>
    </div>

    <div class="architecture-note">
      <p><strong>Note:</strong> This guide focuses on safety monitoring—one application of the underlying architecture. The same infrastructure enables <strong>treatment optimization</strong> (dose timing, side-effect prediction, outcome comparison), <strong>pre-diagnosis early detection</strong> (pattern-matching symptoms against disease trajectories before clinical presentation), <strong>real-time distributed drug research</strong> (continuous n-of-millions trials instead of n-of-thousands snapshots), and more. The pipes are identical. The bucket keys differ. Define a new similarity space, route to it, synthesize outcomes—same protocol, different questions answered.</p>
    </div>

    <div class="highlight-box" style="text-align: center; margin-top: 40px;">
      <p style="font-size: 1.4rem; color: var(--text-primary); margin: 0;"><strong>From coughs to crops to cars—the survival of one becomes the survival of all.</strong></p>
    </div>

  </article>

  <!-- CTA Section -->
  <section class="cta-section">
    <h2>The Math Is Public. The Components Exist.</h2>
    <p style="color:var(--text-secondary); max-width:600px; margin:0 auto;">Every piece of this system runs in production today somewhere. The architecture that combines them is the innovation.</p>
    <div class="cta-buttons">
      <a href="https://qisprotocol.substack.com" class="cta-primary" target="_blank">Subscribe on Substack</a>
      <a href="how-it-works.html" class="cta-secondary">How QIS Works</a>
      <a href="article-every-component-exists.html" class="cta-secondary">Every Component Exists</a>
      <a href="healthcare.html" class="cta-secondary">Healthcare Applications</a>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>QIS Protocol • Quadratic Intelligence Swarm</p>
    <p><a href="index.html?skip=true">Home</a> • <a href="directory.html">Full Directory</a> • <a href="https://github.com/YonderZenith">GitHub</a> • <a href="disclaimer.html">Disclaimer</a> • Yonder Zenith LLC • 39 Provisional Patents</p>
    <p style="margin-top: 20px; font-size: 0.9rem;">© 2025 Yonder Zenith LLC. All rights reserved.</p>
  </footer>

  <script>
    function toggleMenu() {
      document.querySelector('.nav-links').classList.toggle('active');
      document.querySelector('.nav-overlay').classList.toggle('active');
    }
  </script>

</body>
</html>
